{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Todo-List\\\\Todo-List\\\\src\\\\Components\\\\EditTask\\\\EditTask.js\";\nimport React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport InputGroup from 'react-bootstrap/InputGroup';\n\nclass EditTask extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setValidated = val => {\n      this.setState({\n        validated: val\n      });\n    };\n\n    this.editTask = () => {\n      let updateItem = {\n        \"id\": this.state.item.id,\n        \"description\": this.state.item.description,\n        \"status\": this.state.item.status,\n        \"label\": this.state.item.label,\n        \"date\": this.state.item.date,\n        \"time\": this.state.item.time\n      };\n      let token = (\"Token \" + this.props.authToken).toString();\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": token\n        },\n        body: JSON.stringify(updateItem)\n      };\n      fetch('http://127.0.0.1:8000/item/update', requestOptions).then(response => {\n        if (response.status === 200) {\n          this.props.updateData();\n          this.props.onHide();\n          this.handleReset();\n          alert(\"Задача была обновлена.\");\n        } else {\n          alert(\"Произошла ошибка. В настоящее время мы работаем над ее устранением. Спасибо.\");\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      const form = event.currentTarget;\n      event.preventDefault();\n\n      if (form.checkValidity() === false) {\n        event.stopPropagation();\n        this.setValidated(true);\n      } else {\n        console.log(this.state.item);\n        let nowDate = Date.now();\n        let dueDate = new Date(this.state.item.date + \" \" + this.state.item.time);\n        let daysDiff = (dueDate.getTime() - nowDate) / (1000 * 3600 * 24);\n        let val = \"Ongoing\";\n\n        if (daysDiff < 0) {\n          val = \"Overdue\";\n        } else if (daysDiff <= 2) {\n          val = \"Pending\";\n        }\n\n        let newItem = this.state.item;\n        newItem.status = val;\n        this.setState({\n          item: newItem\n        }, this.editTask());\n        this.setValidated(false);\n      }\n    };\n\n    this.handleReset = event => {\n      let newitem = {\n        id: \"\",\n        description: \"\",\n        status: \"\",\n        label: \"\",\n        date: \"\",\n        time: \"\"\n      };\n      this.setState({\n        item: newitem\n      });\n      this.setValidated(false);\n    };\n\n    this.handleInputChange = event => {\n      const target = event.target;\n      let newitem = this.state.item;\n      let value;\n\n      if (target.name === \"description\") {\n        value = target.value;\n      } else if (target.name === \"date\") {\n        value = target.value;\n      } else if (target.name === \"time\") {\n        value = target.value;\n        console.log(value);\n      } else if (target.name === \"label\") {\n        value = target.value;\n      }\n\n      const name = target.name;\n      newitem[name] = value;\n      this.setState({\n        item: newitem\n      });\n    };\n\n    this.state = {\n      validated: false,\n      item: {\n        id: this.props.editTask.id,\n        description: this.props.editTask.description,\n        status: this.props.editTask.status,\n        label: this.props.editTask.label,\n        date: this.props.editTask.date,\n        time: this.props.editTask.time.slice(0, 5)\n      }\n    };\n  }\n\n  render() {\n    const dark = {\n      background: \"#333\",\n      color: \"white\"\n    };\n    const light = {\n      color: \"#555\",\n      background: \"white\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: this.props.isDark === true ? dark : light,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      show: this.props.show,\n      onHide: this.props.onHide,\n      size: \"lg\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      style: this.props.isDark === true ? dark : light,\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      id: \"contained-modal-title-vcenter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"py-1\",\n      style: {\n        fontWeight: 600\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"))), /*#__PURE__*/React.createElement(Modal.Body, {\n      style: this.props.isDark === true ? dark : light,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      noValidate: true,\n      validated: this.state.validated,\n      onSubmit: this.handleSubmit,\n      onReset: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      md: \"12\",\n      controlId: \"validationTitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      required: true,\n      type: \"text\",\n      name: \"description\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0443\",\n      value: this.state.item.description,\n      onChange: this.handleInputChange,\n      style: this.props.isDark === true ? dark : null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0442\\u0430\\u043B\\u0438 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, \"\\u041D\\u0435\\u043F\\u043B\\u043E\\u0445\\u043E.\"))), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      md: \"4\",\n      controlId: \"validationDate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n      id: \"inputGroupPrepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 37\n      }\n    }, \"\\u0414\\u0430\\u0442\\u0430\")), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      name: \"date\",\n      \"aria-describedby\": \"inputGroupPrepend\",\n      value: this.state.item.date,\n      onChange: this.handleInputChange,\n      style: this.props.isDark === true ? dark : null,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    }, \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u044F\\u0449\\u0438\\u0439 \\u0441\\u0440\\u043E\\u043A.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, \"\\u041D\\u0435\\u043F\\u043B\\u043E\\u0445\\u043E.\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      md: \"4\",\n      controlId: \"validationTime\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Prepend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n      id: \"inputGroupPrepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 37\n      }\n    }, \"\\u0412\\u0440\\u0435\\u043C\\u044F\")), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"time\",\n      name: \"time\",\n      \"aria-describedby\": \"inputGroupPrepend\",\n      value: this.state.item.time,\n      onChange: this.handleInputChange,\n      style: this.props.isDark === true ? dark : null,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 33\n      }\n    }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0445\\u043E\\u0434\\u044F\\u0449\\u0435\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F \\u0434\\u043B\\u044F \\u043D\\u0430\\u043F\\u043E\\u043C\\u0438\\u043D\\u0430\\u043D\\u0438\\u044F.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 33\n      }\n    }, \"\\u041D\\u0435\\u043F\\u043B\\u043E\\u0445\\u043E.\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      md: \"4\",\n      controlId: \"validationLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"label\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0443\",\n      value: this.state.item.label,\n      onChange: this.handleInputChange,\n      style: this.props.isDark === true ? dark : null,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 29\n      }\n    }, \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0443.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 29\n      }\n    }, \"\\u041D\\u0435\\u043F\\u043B\\u043E\\u0445\\u043E.\"))), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"offset-md-3 col-md-2 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-lg\",\n      type: \"submit\",\n      id: \"add-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 33\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"offset-md-2 col-md-2 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger btn-lg\",\n      type: \"reset\",\n      id: \"reset-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 33\n      }\n    }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\")))))));\n  }\n\n}\n\nexport default EditTask;","map":{"version":3,"sources":["C:/Users/User/Desktop/Todo-List/Todo-List/src/Components/EditTask/EditTask.js"],"names":["React","Modal","Form","Col","InputGroup","EditTask","Component","constructor","props","setValidated","val","setState","validated","editTask","updateItem","state","item","id","description","status","label","date","time","token","authToken","toString","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","updateData","onHide","handleReset","alert","handleSubmit","event","form","currentTarget","preventDefault","checkValidity","stopPropagation","console","log","nowDate","Date","now","dueDate","daysDiff","getTime","newItem","newitem","handleInputChange","target","value","name","slice","render","dark","background","color","light","isDark","show","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport Col from 'react-bootstrap/Col';\nimport InputGroup from 'react-bootstrap/InputGroup';\n\nclass EditTask extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            validated: false,\n            item: {\n                id: this.props.editTask.id,\n                description: this.props.editTask.description,\n                status: this.props.editTask.status,\n                label: this.props.editTask.label,\n                date: this.props.editTask.date,\n                time: this.props.editTask.time.slice(0,5)\n            }\n        }\n    }\n\n    setValidated = (val) => {\n        this.setState({\n            validated: val\n        })\n    }\n\n    editTask = () => {\n        let updateItem = {\n            \"id\": this.state.item.id,\n            \"description\": this.state.item.description,\n            \"status\": this.state.item.status,\n            \"label\": this.state.item.label,\n            \"date\": this.state.item.date,\n            \"time\": this.state.item.time\n        }\n\n        let token = (\"Token \" + this.props.authToken).toString();\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { \n                \"Content-Type\": \"application/json\",\n                \"Authorization\": token,\n            },\n            body: JSON.stringify(updateItem) \n        };\n\n        fetch('http://127.0.0.1:8000/item/update', requestOptions)\n        .then(response => {\n            if(response.status === 200){\n                this.props.updateData();\n                this.props.onHide();\n                this.handleReset();\n                alert(\"Задача была обновлена.\");\n            } else {\n                alert(\"Произошла ошибка. В настоящее время мы работаем над ее устранением. Спасибо.\");\n            }\n        });\n    }\n\n    handleSubmit = (event) => {\n        const form = event.currentTarget;\n        event.preventDefault();\n        if (form.checkValidity() === false) {\n            event.stopPropagation();\n            this.setValidated(true);\n        } else {\n            console.log(this.state.item);\n            let nowDate = Date.now();\n            let dueDate = new Date(this.state.item.date + \" \" + this.state.item.time);\n            let daysDiff = (dueDate.getTime() - nowDate) / (1000 * 3600 * 24);\n            let val = \"Ongoing\";\n            \n            if(daysDiff < 0) {\n                val = \"Overdue\";\n            } else if (daysDiff <=2) {\n                val = \"Pending\";\n            }\n\n            let newItem = this.state.item;\n            newItem.status = val;\n            this.setState({\n                item: newItem\n            }, this.editTask());\n\n            this.setValidated(false);\n        }\n    }\n\n    handleReset = (event) => {\n        let newitem = {\n            id: \"\",\n            description: \"\",\n            status: \"\",\n            label: \"\",\n            date: \"\",\n            time: \"\"\n        };\n\n        this.setState({\n            item: newitem\n        });\n\n        this.setValidated(false);\n    }\n\n    handleInputChange = (event) => {\n        const target = event.target;\n\n        let newitem = this.state.item;\n        let value;\n        if(target.name === \"description\") {\n            value = target.value;\n        } else if(target.name === \"date\") {\n            value = target.value;\n        } else if(target.name === \"time\") {\n            value = target.value;\n            console.log(value);\n        } else if(target.name === \"label\") {\n            value = target.value;\n        }\n\n        const name = target.name;\n    \n        newitem[name] = value;\n    \n        this.setState({\n            item: newitem\n        });\n    }\n\n    render() {\n\n        const dark = {\n            background: \"#333\",\n            color: \"white\"\n        }\n    \n        const light = {\n            color: \"#555\",\n            background: \"white\"\n        }\n\n        return (\n            <div style={this.props.isDark === true ? dark : light}>\n                <Modal\n                    show={this.props.show}\n                    onHide={this.props.onHide}\n                    size=\"lg\"\n                    aria-labelledby=\"contained-modal-title-vcenter\"\n                    centered\n                >\n                <Modal.Header style={this.props.isDark === true ? dark : light} closeButton>\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\n                        <h2 className=\"py-1\" style={{fontWeight: 600}}>\n                            Редактирование задачи\n                        </h2>\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body style={this.props.isDark === true ? dark : light}>\n                    <Form \n                        noValidate \n                        validated={this.state.validated} \n                        onSubmit={this.handleSubmit} \n                        onReset={this.handleReset}\n                    >\n                        <Form.Row>\n                            <Form.Group as={Col} md=\"12\" controlId=\"validationTitle\">\n                            <Form.Control\n                                required\n                                type=\"text\"\n                                name=\"description\"\n                                placeholder=\"Введите задачу\"\n                                value={this.state.item.description} \n                                onChange={this.handleInputChange}\n                                style={this.props.isDark === true ? dark : null}\n                            />\n                            <Form.Control.Feedback type=\"invalid\">\n                                Пожалуйста, введите детали задачи.\n                            </Form.Control.Feedback>\n                            <Form.Control.Feedback>\n                                Неплохо.\n                            </Form.Control.Feedback>\n                            </Form.Group>\n                        </Form.Row>\n                        <Form.Row>\n                            <Form.Group as={Col} md=\"4\" controlId=\"validationDate\">\n                            <InputGroup>\n                                <InputGroup.Prepend>\n                                    <InputGroup.Text id=\"inputGroupPrepend\">Дата</InputGroup.Text>\n                                </InputGroup.Prepend>\n                                <Form.Control\n                                    type=\"date\"\n                                    name=\"date\"\n                                    aria-describedby=\"inputGroupPrepend\"\n                                    value={this.state.item.date}\n                                    onChange={this.handleInputChange}\n                                    style={this.props.isDark === true ? dark : null}\n                                    required\n                                />\n                                <Form.Control.Feedback type=\"invalid\">\n                                    Пожалуйста, выберите подходящий срок.\n                                </Form.Control.Feedback>\n                                <Form.Control.Feedback>\n                                    Неплохо.\n                                </Form.Control.Feedback>\n                            </InputGroup>\n                            </Form.Group>\n                            <Form.Group as={Col} md=\"4\" controlId=\"validationTime\">\n                            <InputGroup>\n                                <InputGroup.Prepend>\n                                    <InputGroup.Text id=\"inputGroupPrepend\">Время</InputGroup.Text>\n                                </InputGroup.Prepend>\n                                <Form.Control\n                                    type=\"time\"\n                                    name=\"time\"\n                                    aria-describedby=\"inputGroupPrepend\"\n                                    value={this.state.item.time}\n                                    onChange={this.handleInputChange}\n                                    style={this.props.isDark === true ? dark : null}\n                                    required\n                                />\n                                <Form.Control.Feedback type=\"invalid\">\n                                    Выберите подходящее время для напоминания.\n                                </Form.Control.Feedback>\n                                <Form.Control.Feedback>\n                                    Неплохо.\n                                </Form.Control.Feedback>\n                            </InputGroup>\n                            </Form.Group>\n                            <Form.Group as={Col} md=\"4\" controlId=\"validationLabel\">\n                            <Form.Control \n                                type=\"text\"\n                                name=\"label\"\n                                placeholder=\"Введите заметку\" \n                                value={this.state.item.label}\n                                onChange={this.handleInputChange}\n                                style={this.props.isDark === true ? dark : null}\n                                required \n                            />\n                            <Form.Control.Feedback type=\"invalid\">\n                                Пожалуйста, введите заметку.\n                            </Form.Control.Feedback>\n                            <Form.Control.Feedback>\n                                Неплохо.\n                            </Form.Control.Feedback>\n                            </Form.Group>\n                        </Form.Row>\n                        <Form.Row>\n                            <Form.Group className=\"offset-md-3 col-md-2 mb-3\">\n                                <button className=\"btn btn-primary btn-lg\" type=\"submit\" id=\"add-btn\">Добавить</button>\n                            </Form.Group>\n                            <Form.Group className=\"offset-md-2 col-md-2 mb-3\">\n                                <button className=\"btn btn-danger btn-lg\" type=\"reset\" id=\"reset-btn\">Обновить</button>\n                            </Form.Group>\n                        </Form.Row>\n                    </Form>\n                </Modal.Body>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nexport default EditTask;"]},"metadata":{},"sourceType":"module"}